# Architecture Overview

## File Structure

```
aksoles-main/
│
├── src/                              # TypeScript source files
│   ├── types.ts                      # Type definitions
│   ├── responsive.ts                 # Responsive manager (NEW)
│   ├── script.ts                     # Cart functionality
│   └── slide.ts                      # Carousel functionality
│
├── dist/                             # Compiled JavaScript (generated by build)
│   ├── types.js
│   ├── responsive.js
│   ├── script.js
│   ├── slide.js
│   ├── types.js.map
│   ├── responsive.js.map
│   ├── script.js.map
│   └── slide.js.map
│
├── index.html                        # Updated to use dist/script.js
├── cart.html                         # Updated to use dist/script.js
├── checkout.html                     # Updated to use dist/script.js
├── contact.html                      # Updated to use dist/script.js
├── full.html                         # Updated to use dist/script.js
├── jordan.html                       # Updated to use dist/script.js
├── misc.html                         # Updated to use dist/script.js
├── nike.html                         # Updated to use dist/script.js
│
├── main.css                          # Updated with responsive utilities
├── [other CSS files]                 # Unchanged
├── [image files]                     # Unchanged
│
├── tsconfig.json                     # TypeScript configuration (NEW)
├── package.json                      # NPM scripts & dependencies (NEW)
│
├── QUICKSTART.md                     # Quick setup guide (NEW)
├── TYPESCRIPT_MIGRATION.md           # Detailed documentation (NEW)
└── MIGRATION_SUMMARY.md              # This migration summary (NEW)
```

## Module Dependencies

```
HTML Files
    ↓
dist/script.js (imported as ES module)
    ↓
src/script.ts
    ├─→ src/types.ts (imports Product, CartItems interfaces)
    └─→ src/responsive.ts (imports ResponsiveManager)
        └─→ src/responsive.ts uses window events

HTML Files (with carousel)
    ↓
dist/slide.js (imported as ES module)
    ↓
src/slide.ts
    └─→ src/responsive.ts (imports responsiveManager)
        └─→ Listens for layout recalculation events
```

## How Responsive Manager Works

```
┌─────────────────────────────────────────────────────────┐
│              Window Resize Event                         │
└────────────────────┬────────────────────────────────────┘
                     │
                     ↓
        ┌────────────────────────┐
        │ Debounce Timer (250ms) │
        └────────────────┬───────┘
                         │
                         ↓
        ┌────────────────────────────────┐
        │ Check Viewport Size            │
        │ (< 768px = mobile)             │
        └────────┬───────────────────────┘
                 │
        ┌────────┴────────┐
        │                 │
        ↓                 ↓
    Mobile?           Desktop?
    (isMobile=true)   (isMobile=false)
        │                 │
        └────────┬────────┘
                 │
                 ↓
    ┌─────────────────────────────────────┐
    │ Update body classes:                 │
    │ - mobile-view / desktop-view        │
    │ - Notify all listeners              │
    └────────┬────────────────────────────┘
             │
             ↓
    ┌────────────────────────────────────┐
    │ Force Layout Recalculation:        │
    │ - Access offsetHeight              │
    │ - Trigger CSS reflow               │
    │ - Dispatch custom event            │
    └────────┬───────────────────────────┘
             │
             ↓
    ┌────────────────────────────────────┐
    │ Notify Listeners                   │
    │ - Cart updates layout if needed    │
    │ - Slider recalculates items       │
    │ - Any custom listeners fire       │
    └────────────────────────────────────┘
```

## Data Flow

```
┌──────────────────────┐
│   User Interaction   │
│ (click, resize, etc) │
└──────────┬───────────┘
           │
           ↓
┌──────────────────────────────┐
│   Event Handler              │
│   (TypeScript function)      │
└──────────┬───────────────────┘
           │
           ↓
┌──────────────────────────────┐
│   Update State               │
│   (localStorage, variables)  │
└──────────┬───────────────────┘
           │
           ↓
┌──────────────────────────────┐
│   Update DOM                 │
│   (innerHTML, classList)     │
└──────────┬───────────────────┘
           │
           ↓
┌──────────────────────────────┐
│   CSS Applies Styles         │
│   (including responsive)     │
└──────────────────────────────┘
```

## Type System

```
┌─────────────────────────────────────────┐
│           Type Definitions              │
│          (src/types.ts)                 │
├─────────────────────────────────────────┤
│                                         │
│  interface Product {                   │
│    name: string                        │
│    tag: string                        │
│    price: number                      │
│    size: number                       │
│    inCart: number                     │
│  }                                    │
│                                         │
│  interface CartItems {                  │
│    [key: string]: Product             │
│  }                                     │
│                                         │
│  interface ResponsiveBreakpoint {      │
│    mobile: number                      │
│    tablet: number                      │
│    desktop: number                     │
│  }                                     │
│                                         │
└─────────────────────────────────────────┘
        ↓                      ↓
┌─────────────────┐  ┌──────────────────┐
│  script.ts      │  │  responsive.ts   │
│  Uses all types │  │  Uses            │
│  for cart ops   │  │  ResponsiveBreak │
└─────────────────┘  └──────────────────┘
```

## Responsive Breakpoints

```
Mobile                    Tablet/Responsive          Desktop
0px - 479px              480px - 767px               768px+
┌──────────────────┐ ┌──────────────────┐ ┌──────────────────┐
│  Narrow layout   │ │  Intermediate    │ │  Full layout     │
│  Small buttons   │ │  Flexible grid   │ │  Multi-column    │
│  Stack vertical  │ │  Medium fonts    │ │  Large fonts     │
│  Touch friendly  │ │  Adaptive nav    │ │  Hover effects   │
└──────────────────┘ └──────────────────┘ └──────────────────┘
```

## Build Pipeline

```
TypeScript Files (src/)
         │
         ↓
    TypeScript Compiler
    (tsc configured)
         │
         ↓
JavaScript Files (dist/)
         │
         ├─→ script.js
         ├─→ slide.js
         ├─→ responsive.js
         ├─→ types.js
         │
         └─→ .js.map files (source maps)
                │
                ↓
    HTML Files Reference dist/
                │
                ↓
    Browser Loads and Executes
                │
                ↓
    Website Functions Normally
    (with responsive sizing)
```

## Event Flow During Resize

```
┌─────────────────────────────────┐
│   User resizes browser window   │
└────────────┬────────────────────┘
             │
             ↓
┌────────────────────────────────┐
│   window 'resize' event fires  │
└────────────┬───────────────────┘
             │
             ↓
┌────────────────────────────────────────┐
│   ResponsiveManager.setupResizeListener│
│   (debounce: 250ms)                    │
└────────────┬───────────────────────────┘
             │
        [250ms timeout]
             │
             ↓
┌──────────────────────────────────┐
│   handleResize() called          │
├──────────────────────────────────┤
│  1. Check viewport (is mobile?)  │
│  2. Check if state changed       │
└────────┬───────────────────────┘
         │
    [Mobile/Desktop transition?]
         │
    YES  │  NO
         │  │
         ↓  ↓
    Notify    Done
    Listeners
         │
         ↓
    ┌─────────────────────────────┐
    │ recalculateLayout()         │
    ├─────────────────────────────┤
    │ 1. Force reflow             │
    │ 2. Dispatch custom event    │
    │ 3. Update DOM if needed     │
    └─────────────────────────────┘
         │
         ↓
    Components receive updates
    (cart redraws if needed)
    (slider adjusts items)
```

## CSS Class Management

```
Window Resize Event
         │
         ↓
ResponsiveManager detects viewport
         │
    ┌────┴────┐
    │          │
    ↓          ↓
< 768px    >= 768px
    │          │
    ↓          ↓
Add:       Add:
.mobile-   .desktop-
view       view
    │          │
    └────┬─────┘
         │
         ↓
CSS Media Queries Activate
         │
    ┌────┴──────────┐
    │               │
    ↓               ↓
body.mobile-view  body.desktop-view
 Styles Apply      Styles Apply
```

---

**This architecture ensures that your website remains responsive and stable during all viewport changes!** ✨
